/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/

!function(){var e=function(e,n){return"string"==typeof n?f(n,{filename:e}):r(e,n)};e.version="3.0.0",e.config=function(e,t){n[e]=t};var n=e.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},t=e.cache={};e.render=function(e,n){return f(e)(n)};var r=e.renderFile=function(n,t){var r=e.get(n)||s({filename:n,name:"Render Error",message:"Template not found"});return t?r(t):r};e.get=function(e){var n;if(t[e])n=t[e];else if("object"==typeof document){var r=document.getElementById(e);if(r){var a=(r.value||r.innerHTML).replace(/^\s*|\s*$/g,"");n=f(a,{filename:e})}}return n};var a=function(e,n){return"string"!=typeof e&&("number"===(n=typeof e)?e+="":e="function"===n?a(e.call(e)):""),e},o={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},i=function(e){return o[e]},l=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},c=e.utils={$helpers:{},$include:r,$string:a,$escape:function(e){return a(e).replace(/&(?![\w#]+;)|[<>"']/g,i)},$each:function(e,n){var t,r;if(l(e))for(t=0,r=e.length;t<r;t++)n.call(e,e[t],t,e);else for(t in e)n.call(e,e[t],t)}};e.helper=function(e,n){u[e]=n};var u=e.helpers=c.$helpers;e.onerror=function(e){var n="Template Error\n\n";for(var t in e)n+="<"+t+">\n"+e[t]+"\n\n";"object"==typeof console&&console.error(n)};var s=function(n){return e.onerror(n),function(){return"{Template Error}"}},f=e.compile=function(e,r){r=r||{};for(var a in n)void 0===r[a]&&(r[a]=n[a]);var o=r.filename;try{var i=function(e,n){var t=n.debug,r=n.openTag,a=n.closeTag,o=n.parser,i=n.compress,l=n.escape,s=1,f={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},b="".trim,w=b?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],x=b?"$out+=text;return $out;":"$out.push(text);",T="function(){var text=''.concat.apply('',arguments);"+x+"}",E="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+x+"}",j="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(t?"$line=0,":""),S=w[0],W="return new String("+w[3]+");";p(e.split(r),function(e){var r=(e=e.split(a))[0],i=e[1];1===e.length?S+=k(r):(S+=function(e){var r=s;o?e=o(e,n):t&&(e=e.replace(/\n/g,function(){return"$line="+ ++s+";"}));if(0===e.indexOf("=")){var a=l&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),a){var i=e.replace(/\s*\([^\)]+\)/,"");c[i]||/^(include|print)$/.test(i)||(e="$escape("+e+")")}else e="$string("+e+")";e=w[1]+e+w[2]}t&&(e="$line="+r+";"+e);return p((y=e,y.replace($,"").replace(g,",").replace(d,"").replace(m,"").replace(h,"").split(v)),function(e){var n;e&&!f[e]&&(n="print"===e?T:"include"===e?E:c[e]?"$utils."+e:u[e]?"$helpers."+e:"$data."+e,j+=e+"="+n+",",f[e]=!0)}),e+"\n";var y}(r),i&&(S+=k(i)))});var A=j+S+W;t&&(A="try{"+A+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+y(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var R=new Function("$data","$filename",A);return R.prototype=c,R}catch(e){throw e.temp="function anonymous($data,$filename) {"+A+"}",e}function k(e){return s+=e.split(/\n/).length-1,i&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=w[1]+y(e)+w[2]+"\n"),e}}(e,r)}catch(e){return e.filename=o||"anonymous",e.name="Syntax Error",s(e)}function l(n){try{return new i(n,o)+""}catch(t){return r.debug?s(t)():(r.debug=!0,f(e,r)(n))}}return l.prototype=i.prototype,l.toString=function(){return i.toString()},o&&r.cache&&(t[o]=l),l},p=c.$each,$=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,g=/[^\w$]+/g,d=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),m=/^\d[^,]*|,\d[^,]*/g,h=/^,+|,+$/g,v=/^$|,+/;function y(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}"object"==typeof exports&&"undefined"!=typeof module?module.exports=e:"function"==typeof define?define(function(){return e}):this.template=e}();