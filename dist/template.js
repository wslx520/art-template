/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/

!function(){var e=function(e,n){return"string"==typeof n?f(n,{filename:e}):t(e,n)};e.version="3.0.0",e.config=function(e,r){n[e]=r};var n=e.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},r=e.cache={};e.render=function(e,n){return f(e)(n)};var t=e.renderFile=function(n,r){var t=e.get(n)||u({filename:n,name:"Render Error",message:"Template not found"});return r?t(r):t};e.get=function(e){var n;if(r[e])n=r[e];else if("object"==typeof document){var t=document.getElementById(e);if(t){var a=(t.value||t.innerHTML).replace(/^\s*|\s*$/g,"");n=f(a,{filename:e})}}return n};var a=function(e,n){return"string"!=typeof e&&("number"===(n=typeof e)?e+="":e="function"===n?a(e.call(e)):""),e},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=function(e){return i[e]},c=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},l=e.utils={$helpers:{},$include:t,$string:a,$escape:function(e){return a(e).replace(/&(?![\w#]+;)|[<>"']/g,o)},$each:function(e,n){var r,t;if(c(e))for(r=0,t=e.length;r<t;r++)n.call(e,e[r],r,e);else for(r in e)n.call(e,e[r],r)}};e.helper=function(e,n){s[e]=n};var s=e.helpers=l.$helpers;e.onerror=function(e){var n="Template Error\n\n";for(var r in e)n+="<"+r+">\n"+e[r]+"\n\n";"object"==typeof console&&console.error(n)};var u=function(n){return e.onerror(n),function(){return"{Template Error}"}},f=e.compile=function(e,t){t=t||{};for(var a in n)void 0===t[a]&&(t[a]=n[a]);var i=t.filename;try{var o=function(e,n){var r=n.debug,t=n.openTag,a=n.closeTag,i=n.parser,o=n.compress,c=n.escape,u=1,f={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},b="".trim,w=b?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],x=b?"$out+=text;return $out;":"$out.push(text);",j="function(){var text=''.concat.apply('',arguments);"+x+"}",k="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+x+"}",T="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(r?"$line=0,":""),E=w[0],S="return new String("+w[3]+");";p(e.split(t),function(e){var t=(e=e.split(a))[0],o=e[1];1===e.length?E+=R(t):(E+=function(e){var t=u;i?e=i(e,n):r&&(e=e.replace(/\n/g,function(){return"$line="+ ++u+";"}));if(0===e.indexOf("=")){var a=c&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),a){var o=e.replace(/\s*\([^\)]+\)/,"");l[o]||/^(include|print)$/.test(o)||(e="$escape("+e+")")}else e="$string("+e+")";e=w[1]+e+w[2]}r&&(e="$line="+t+";"+e);return p((y=e,y.replace($,"").replace(d,",").replace(g,"").replace(h,"").replace(v,"").split(m)),function(e){var n;e&&!f[e]&&(n="print"===e?j:"include"===e?k:l[e]?"$utils."+e:s[e]?"$helpers."+e:"$data."+e,T+=e+"="+n+",",f[e]=!0)}),e+"\n";var y}(t),o&&(E+=R(o)))});var W=T+E+S;r&&(W="try{"+W+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+y(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",W);return A.prototype=l,A}catch(e){throw e.temp="function anonymous($data,$filename) {"+W+"}",e}function R(e){return u+=e.split(/\n/).length-1,o&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=w[1]+y(e)+w[2]+"\n"),e}}(e,t)}catch(e){return e.filename=i||"anonymous",e.name="Syntax Error",u(e)}function c(n){try{return new o(n,i)+""}catch(r){return t.debug?u(r)():(t.debug=!0,f(e,t)(n))}}return c.prototype=o.prototype,c.toString=function(){return o.toString()},i&&t.cache&&(r[i]=c),c},p=l.$each,$=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,d=/[^\w$]+/g,g=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),h=/^\d[^,]*|,\d[^,]*/g,v=/^,+|,+$/g,m=/^$|,+/;function y(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}n.openTag="{{",n.closeTag="}}";n.parser=function(n,r){var t,a,i,o,c,l=(n=n.replace(/^\s/,"")).split(" "),s=l.shift(),u=l.join(" ");switch(s){case"if":n="if("+u+"){";break;case"else":n="}else"+(l="if"===l.shift()?" if("+l.join(" ")+")":"")+"{";break;case"/if":n="}";break;case"each":var f=l[0]||"$data",p=l[1]||"as",$=l[2]||"$value",d=l[3]||"$index";"as"!==p&&(f="[]"),n="$each("+f+",function("+($+","+d)+"){";break;case"/each":n="});";break;case"echo":n="print("+u+");";break;case"print":case"include":n=s+"("+l.join(",")+");";break;case"var":n="var "+u+";";break;default:if(/^\s*\|\s*[\w\$]/.test(u)){var g=!0;0===n.indexOf("#")&&(n=n.substr(1),g=!1);for(var h=0,v=n.split("|"),m=v.length,y=v[h++];h<m;h++)t=y,a=v[h],i=void 0,void 0,c=void 0,i=a.split(":"),o=i.shift(),(c=i.join(":")||"")&&(c=", "+c),y="$helpers."+o+"("+t+c+")";n=(g?"=":"=#")+y}else n=e.helpers[s]?"=#"+s+"("+l.join(",")+");":"="+n}return n},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e:"function"==typeof define?define(function(){return e}):this.template=e}();